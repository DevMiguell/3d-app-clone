{"ast":null,"code":"import _extends from '@babel/runtime/helpers/esm/extends';\nimport * as THREE from 'three';\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport { useThree, useFrame, context as context$1 } from '@react-three/fiber';\nimport mergeRefs from 'react-merge-refs';\nconst context = /*#__PURE__*/React.createContext(null);\n\nfunction useScroll() {\n  return React.useContext(context);\n}\n\nfunction ScrollControls(_ref) {\n  let {\n    eps = 0.00001,\n    infinite,\n    horizontal,\n    pages = 1,\n    distance = 1,\n    damping = 4,\n    children\n  } = _ref;\n  const gl = useThree(state => state.gl);\n  const invalidate = useThree(state => state.invalidate);\n  const events = useThree(state => state.events);\n  const raycaster = useThree(state => state.raycaster);\n  const [el] = React.useState(() => document.createElement('div'));\n  const [fill] = React.useState(() => document.createElement('div'));\n  const [fixed] = React.useState(() => document.createElement('div'));\n  const target = gl.domElement.parentNode;\n  const scroll = React.useRef(0);\n  const state = React.useMemo(() => {\n    const state = {\n      el,\n      eps,\n      fill,\n      fixed,\n      horizontal,\n      damping,\n      offset: 0,\n      delta: 0,\n      scroll,\n      pages,\n\n      // 0 - 1 for a range between start -> start + range\n      range(start, range) {\n        const end = start + range;\n        return this.offset < start ? 0 : this.offset > end ? 1 : (this.offset - start) / (end - start);\n      },\n\n      // true/false for a range between start -> start + range\n      visible(start, range) {\n        const end = start + range;\n        return this.offset >= start && this.offset <= end;\n      }\n\n    };\n    return state;\n  }, [eps, damping, horizontal, pages]);\n  React.useEffect(() => {\n    el.style.position = 'absolute';\n    el.style.width = '100%';\n    el.style.height = '100%';\n    el.style[horizontal ? 'overflowX' : 'overflowY'] = 'auto';\n    el.style.top = '0px';\n    el.style.left = '0px';\n    fixed.style.position = 'sticky';\n    fixed.style.top = '0px';\n    fixed.style.left = '0px';\n    el.appendChild(fixed);\n    fill.style.height = horizontal ? '100%' : \"\".concat(pages * distance * 100, \"%\");\n    fill.style.width = horizontal ? \"\".concat(pages * distance * 100, \"%\") : '100%';\n    fill.style.pointerEvents = 'none';\n    el.appendChild(fill);\n\n    const onScroll = e => {\n      invalidate();\n      scroll.current = horizontal ? e.target.scrollLeft / (e.target.scrollWidth - e.target.clientWidth) : e.target.scrollTop / (e.target.scrollHeight - e.target.clientHeight);\n\n      if (infinite) {\n        if (scroll.current === 1) {\n          const damp = 1 - state.offset;\n          e.target[horizontal ? 'scrollLeft' : 'scrollTop'] = 0;\n          scroll.current = state.offset = -damp;\n        } else if (scroll.current === 0) {\n          const damp = 1 + state.offset;\n          e.target[horizontal ? 'scrollLeft' : 'scrollTop'] = e.target[horizontal ? 'scrollWidth' : 'scrollHeight'];\n          scroll.current = state.offset = damp;\n        }\n      }\n    };\n\n    el.addEventListener('scroll', onScroll, {\n      passive: true\n    });\n    target.appendChild(el);\n    requestAnimationFrame(() => events.connect == null ? void 0 : events.connect(el));\n\n    raycaster.computeOffsets = _ref2 => {\n      let {\n        clientX,\n        clientY\n      } = _ref2;\n      return {\n        offsetX: clientX,\n        offsetY: clientY\n      };\n    };\n\n    return () => {\n      target.removeChild(el);\n      el.removeEventListener('scroll', onScroll);\n    };\n  }, [infinite, state, invalidate, distance, damping, pages, horizontal]);\n  let last = 0;\n  useFrame((_, delta) => {\n    state.offset = THREE.MathUtils.damp(last = state.offset, scroll.current, damping, delta);\n    state.delta = THREE.MathUtils.damp(state.delta, Math.abs(last - state.offset), damping, delta);\n    if (state.delta > eps) invalidate();\n  });\n  return /*#__PURE__*/React.createElement(context.Provider, {\n    value: state\n  }, children);\n}\n\nconst Scroll = /*#__PURE__*/React.forwardRef((_ref3, ref) => {\n  let {\n    html,\n    ...props\n  } = _ref3;\n  const El = html ? ScrollHtml : ScrollCanvas;\n  return /*#__PURE__*/React.createElement(El, _extends({\n    ref: ref\n  }, props));\n});\nconst ScrollCanvas = /*#__PURE__*/React.forwardRef((_ref4, ref) => {\n  let {\n    children\n  } = _ref4;\n  const group = React.useRef(null);\n  const state = useScroll();\n  const {\n    width,\n    height\n  } = useThree(state => state.viewport);\n  useFrame(() => {\n    group.current.position.x = state.horizontal ? -width * (state.pages - 1) * state.offset : 0;\n    group.current.position.y = state.horizontal ? 0 : height * (state.pages - 1) * state.offset;\n  });\n  return /*#__PURE__*/React.createElement(\"group\", {\n    ref: mergeRefs([ref, group])\n  }, children);\n});\nconst ScrollHtml = /*#__PURE__*/React.forwardRef((_ref5, ref) => {\n  let {\n    children,\n    style,\n    ...props\n  } = _ref5;\n  const state = useScroll();\n  const group = React.useRef(null);\n  const {\n    width,\n    height\n  } = useThree(state => state.size);\n  const fiberState = React.useContext(context$1);\n  useFrame(() => {\n    if (state.delta > state.eps) {\n      group.current.style.transform = \"translate3d(\".concat(state.horizontal ? -width * (state.pages - 1) * state.offset : 0, \"px,\").concat(state.horizontal ? 0 : height * (state.pages - 1) * -state.offset, \"px,0)\");\n    }\n  });\n  ReactDOM.render( /*#__PURE__*/React.createElement(\"div\", _extends({\n    ref: mergeRefs([ref, group]),\n    style: { ...style,\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      willChange: 'transform'\n    }\n  }, props), /*#__PURE__*/React.createElement(context.Provider, {\n    value: state\n  }, /*#__PURE__*/React.createElement(context$1.Provider, {\n    value: fiberState\n  }, children))), state.fixed);\n  return null;\n});\nexport { Scroll, ScrollControls, useScroll };","map":{"version":3,"sources":["/home/miguel/Documentos/vscode/ESTUDOS/JAVASCRIPT/Outros/scrool app/node_modules/@react-three/drei/web/ScrollControls.js"],"names":["_extends","THREE","React","ReactDOM","useThree","useFrame","context","context$1","mergeRefs","createContext","useScroll","useContext","ScrollControls","eps","infinite","horizontal","pages","distance","damping","children","gl","state","invalidate","events","raycaster","el","useState","document","createElement","fill","fixed","target","domElement","parentNode","scroll","useRef","useMemo","offset","delta","range","start","end","visible","useEffect","style","position","width","height","top","left","appendChild","pointerEvents","onScroll","e","current","scrollLeft","scrollWidth","clientWidth","scrollTop","scrollHeight","clientHeight","damp","addEventListener","passive","requestAnimationFrame","connect","computeOffsets","clientX","clientY","offsetX","offsetY","removeChild","removeEventListener","last","_","MathUtils","Math","abs","Provider","value","Scroll","forwardRef","ref","html","props","El","ScrollHtml","ScrollCanvas","group","viewport","x","y","size","fiberState","transform","render","willChange"],"mappings":"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","sourcesContent":["import _extends from '@babel/runtime/helpers/esm/extends';\nimport * as THREE from 'three';\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport { useThree, useFrame, context as context$1 } from '@react-three/fiber';\nimport mergeRefs from 'react-merge-refs';\n\nconst context = /*#__PURE__*/React.createContext(null);\nfunction useScroll() {\n  return React.useContext(context);\n}\nfunction ScrollControls({\n  eps = 0.00001,\n  infinite,\n  horizontal,\n  pages = 1,\n  distance = 1,\n  damping = 4,\n  children\n}) {\n  const gl = useThree(state => state.gl);\n  const invalidate = useThree(state => state.invalidate);\n  const events = useThree(state => state.events);\n  const raycaster = useThree(state => state.raycaster);\n  const [el] = React.useState(() => document.createElement('div'));\n  const [fill] = React.useState(() => document.createElement('div'));\n  const [fixed] = React.useState(() => document.createElement('div'));\n  const target = gl.domElement.parentNode;\n  const scroll = React.useRef(0);\n  const state = React.useMemo(() => {\n    const state = {\n      el,\n      eps,\n      fill,\n      fixed,\n      horizontal,\n      damping,\n      offset: 0,\n      delta: 0,\n      scroll,\n      pages,\n\n      // 0 - 1 for a range between start -> start + range\n      range(start, range) {\n        const end = start + range;\n        return this.offset < start ? 0 : this.offset > end ? 1 : (this.offset - start) / (end - start);\n      },\n\n      // true/false for a range between start -> start + range\n      visible(start, range) {\n        const end = start + range;\n        return this.offset >= start && this.offset <= end;\n      }\n\n    };\n    return state;\n  }, [eps, damping, horizontal, pages]);\n  React.useEffect(() => {\n    el.style.position = 'absolute';\n    el.style.width = '100%';\n    el.style.height = '100%';\n    el.style[horizontal ? 'overflowX' : 'overflowY'] = 'auto';\n    el.style.top = '0px';\n    el.style.left = '0px';\n    fixed.style.position = 'sticky';\n    fixed.style.top = '0px';\n    fixed.style.left = '0px';\n    el.appendChild(fixed);\n    fill.style.height = horizontal ? '100%' : `${pages * distance * 100}%`;\n    fill.style.width = horizontal ? `${pages * distance * 100}%` : '100%';\n    fill.style.pointerEvents = 'none';\n    el.appendChild(fill);\n\n    const onScroll = e => {\n      invalidate();\n      scroll.current = horizontal ? e.target.scrollLeft / (e.target.scrollWidth - e.target.clientWidth) : e.target.scrollTop / (e.target.scrollHeight - e.target.clientHeight);\n\n      if (infinite) {\n        if (scroll.current === 1) {\n          const damp = 1 - state.offset;\n          e.target[horizontal ? 'scrollLeft' : 'scrollTop'] = 0;\n          scroll.current = state.offset = -damp;\n        } else if (scroll.current === 0) {\n          const damp = 1 + state.offset;\n          e.target[horizontal ? 'scrollLeft' : 'scrollTop'] = e.target[horizontal ? 'scrollWidth' : 'scrollHeight'];\n          scroll.current = state.offset = damp;\n        }\n      }\n    };\n\n    el.addEventListener('scroll', onScroll, {\n      passive: true\n    });\n    target.appendChild(el);\n    requestAnimationFrame(() => events.connect == null ? void 0 : events.connect(el));\n\n    raycaster.computeOffsets = ({\n      clientX,\n      clientY\n    }) => ({\n      offsetX: clientX,\n      offsetY: clientY\n    });\n\n    return () => {\n      target.removeChild(el);\n      el.removeEventListener('scroll', onScroll);\n    };\n  }, [infinite, state, invalidate, distance, damping, pages, horizontal]);\n  let last = 0;\n  useFrame((_, delta) => {\n    state.offset = THREE.MathUtils.damp(last = state.offset, scroll.current, damping, delta);\n    state.delta = THREE.MathUtils.damp(state.delta, Math.abs(last - state.offset), damping, delta);\n    if (state.delta > eps) invalidate();\n  });\n  return /*#__PURE__*/React.createElement(context.Provider, {\n    value: state\n  }, children);\n}\nconst Scroll = /*#__PURE__*/React.forwardRef(({\n  html,\n  ...props\n}, ref) => {\n  const El = html ? ScrollHtml : ScrollCanvas;\n  return /*#__PURE__*/React.createElement(El, _extends({\n    ref: ref\n  }, props));\n});\nconst ScrollCanvas = /*#__PURE__*/React.forwardRef(({\n  children\n}, ref) => {\n  const group = React.useRef(null);\n  const state = useScroll();\n  const {\n    width,\n    height\n  } = useThree(state => state.viewport);\n  useFrame(() => {\n    group.current.position.x = state.horizontal ? -width * (state.pages - 1) * state.offset : 0;\n    group.current.position.y = state.horizontal ? 0 : height * (state.pages - 1) * state.offset;\n  });\n  return /*#__PURE__*/React.createElement(\"group\", {\n    ref: mergeRefs([ref, group])\n  }, children);\n});\nconst ScrollHtml = /*#__PURE__*/React.forwardRef(({\n  children,\n  style,\n  ...props\n}, ref) => {\n  const state = useScroll();\n  const group = React.useRef(null);\n  const {\n    width,\n    height\n  } = useThree(state => state.size);\n  const fiberState = React.useContext(context$1);\n  useFrame(() => {\n    if (state.delta > state.eps) {\n      group.current.style.transform = `translate3d(${state.horizontal ? -width * (state.pages - 1) * state.offset : 0}px,${state.horizontal ? 0 : height * (state.pages - 1) * -state.offset}px,0)`;\n    }\n  });\n  ReactDOM.render( /*#__PURE__*/React.createElement(\"div\", _extends({\n    ref: mergeRefs([ref, group]),\n    style: { ...style,\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      willChange: 'transform'\n    }\n  }, props), /*#__PURE__*/React.createElement(context.Provider, {\n    value: state\n  }, /*#__PURE__*/React.createElement(context$1.Provider, {\n    value: fiberState\n  }, children))), state.fixed);\n  return null;\n});\n\nexport { Scroll, ScrollControls, useScroll };\n"]},"metadata":{},"sourceType":"module"}